if(NOT QVMESSOCKET_PLATFORM_LIBS_BIN_PREFIX)
    set(QVMESSOCKET_PLATFORM_LIBS_BIN_PREFIX ${QVMESSOCKET_PLATFORM_LIBS_PREFIX}/tools)
endif()

list(APPEND CMAKE_PROGRAM_PATH
    ${QVMESSOCKET_PLATFORM_LIBS_BIN_PREFIX}/
    ${QVMESSOCKET_PLATFORM_LIBS_BIN_PREFIX}/grpc/
    ${QVMESSOCKET_PLATFORM_LIBS_BIN_PREFIX}/protobuf/
    ${QVMESSOCKET_PLATFORM_LIBS_BIN_PREFIX}/openssl/
    )

message("CMAKE_PROGRAM_PATH=${CMAKE_PROGRAM_PATH}")

QVLOG(QVMESSOCKET_PLATFORM_LIBS_PREFIX)

if(NOT DEFINED QV2RAY_PLATFORM_LIBS_NO_DEBUG_SUBDIR)
    set(QV2RAY_PLATFORM_LIBS_NO_DEBUG_SUBDIR OFF)
endif()

QVLOG(QV2RAY_PLATFORM_LIBS_NO_DEBUG_SUBDIR)

if((NOT QV2RAY_PLATFORM_LIBS_NO_DEBUG_SUBDIR) AND CMAKE_BUILD_TYPE MATCHES "^[Dd][Ee][Bb][Uu][Gg]$" OR NOT DEFINED CMAKE_BUILD_TYPE)
    # Debug build: Put Debug paths before Release paths.
    list(APPEND CMAKE_PREFIX_PATH
        ${QVMESSOCKET_PLATFORM_LIBS_PREFIX}/debug
        ${QVMESSOCKET_PLATFORM_LIBS_PREFIX}
        )
    link_directories(
        ${QVMESSOCKET_PLATFORM_LIBS_PREFIX}/debug/lib
        ${QVMESSOCKET_PLATFORM_LIBS_PREFIX}/lib
        )
    list(APPEND CMAKE_FIND_ROOT_PATH
        ${QVMESSOCKET_PLATFORM_LIBS_PREFIX}/debug
        ${QVMESSOCKET_PLATFORM_LIBS_PREFIX}
        )
else()
    # Release build: Put Release paths before Debug paths.
    # Debug Paths are required so that CMake generates correct info in autogenerated target files.
    list(APPEND CMAKE_PREFIX_PATH ${QVMESSOCKET_PLATFORM_LIBS_PREFIX})
    link_directories(${QVMESSOCKET_PLATFORM_LIBS_PREFIX}/lib)
    list(APPEND CMAKE_FIND_ROOT_PATH ${QVMESSOCKET_PLATFORM_LIBS_PREFIX})
endif()
